var bearing,bearingInterval,bearingTimer,loadRegionsDone,building={type:"FeatureCollection",features:[]},other={type:"FeatureCollection",features:[]},road={type:"FeatureCollection",features:[]},water={type:"FeatureCollection",features:[]},areas={type:"FeatureCollection",features:[]},areasLine={type:"FeatureCollection",features:[]},sea={type:"FeatureCollection",features:[]},frontsLine={type:"FeatureCollection",features:[]},line1={properties:{placement:"line",text:"\u79c0\u6cbf\u897f\u8def",size:20,spacing:1},geometry:{coordinates:[[121.528091385469,31.130820750330958],[121.5362274706303,31.132880827324794]],type:"LineString"},type:"Feature"},line2={properties:{placement:"line",text:"",size:20,spacing:1},geometry:{coordinates:[[121.52807027220094,31.13061694921052],[121.52993570829311,31.125814309069714]],type:"LineString"},type:"Feature"},line3={properties:{placement:"line",text:"\u4e0a\u5357\u8def",size:20,spacing:1},geometry:{coordinates:[[121.53010956734663,31.125755595286886],[121.53277832842572,31.124792905613205],[121.53555120212428,31.124530354547677],[121.53689209600336,31.124647276766073],[121.53879454460767,31.124910819661245]],type:"LineString"},type:"Feature"},line4={properties:{placement:"line",text:"\u6768\u9ad8\u5357\u8def",size:20,spacing:1},geometry:{coordinates:[[121.53621892557139,31.132788710644725],[121.53768446310336,31.12999372263537],[121.53848385116702,31.1280352093825],[121.53878367992522,31.12653009365462],[121.53898360331121,31.12505313867464]],type:"LineString"},type:"Feature"};frontsLine.features.push(line1);frontsLine.features.push(line2);frontsLine.features.push(line3);frontsLine.features.push(line4);var propertys=[],regions=[],colorData={},allIconData="1053000001\t121.541708\t31.135037\tB1\u697c\u7f51\u7ba1\u4e2d\u5fc3\u5317\u4fa7\t\u6c61\u6c34\u623f\t121.5309209\t31.13110604;1013001262\t121.542148\t31.131729\tB4\u5927\u95e8\u5de6\u8fb930\u7c73-1\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.531362\t31.12779219;1013001274\t121.542031\t31.131876\tB3\u697c\u897f\u5357\u89d2\u8349\u5730\u96e8\u6c34\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5312442\t31.12794098;1013001191\t121.541672\t31.132545\tB3\u697c\u897f\u5317\u89d2\u9a6c\u8def\u4e2d\u95f4\u96e8\u6c34\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5308828\t31.12861543;1013001270\t121.541838\t31.132664\tB3\u697c\u897f\u5317\u89d2\u8349\u5730\u4e0a\u6d88\u9632\u6813\u65c1\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5310502\t31.12873176;1013001261\t121.54266\t31.132881\tB3\u697c\u4e1c\u5317\u89d2\u8349\u5730\u4e0a\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5318787\t31.12893577;1013001172\t121.542903\t31.1329\tB3\u697c\u4e1c\u5317\u89d2\u5899\u8fb9\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5321236\t31.12895098;1013001182\t121.542934\t31.132823\tB3\u697c\u4e1c\u5927\u95e8\u5317\u8fb9\u8349\u5730\u4e0a20\u7c73\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5321548\t31.12887352;1013001185\t121.543001\t31.132583\tB3\u697c\u4e1c\u5927\u95e8\u5357\u976220\u7c73\u8349\u5730\u4e0a\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322221\t31.12863256;1013001258\t121.54319\t31.132004\tB4\u697c\u4e1c\u5317\u89d2\u5899\u8fb9\u8349\u5730\u4e0a\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5324122\t31.12805084;1013001187\t121.543195\t31.131907\tB4\u697c\u4e1c\u5927\u95e8\u5317\u976230\u7c73\u8349\u5730\u4e0a\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5324171\t31.12795379;1013001220\t121.543275\t31.131671\tB4\u697c\u4e1c\u5927\u95e8\u5357\u976220\u7c73\u6d88\u9632\u6813\u65c1\u8349\u5730\u4e0a\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5324976\t31.12771664;1013001178\t121.54337\t31.13149\tB4\u697c\u4e1c\u5927\u95e8\u5357\u976250\u7c73\u505c\u8f66\u573a\u65c1\u8349\u5730\u4e0a\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5325932\t31.12753424;1013001173\t121.54346\t31.131358\tB4\u697c\u4e1c\u5357\u89d2\u8349\u5730\u4e0a70\u7c73\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5326838\t31.1274009;1013001276\t121.543186\t31.131312\tB4\u697c\u5357\u95e8\u6b63\u524d\u65b9\u8349\u5730\u4e0a\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5324077\t31.12735914;1013001257\t121.543055\t31.131254\tB4\u697c\u6b63\u5357\u65b9\u5730\u4e0b\u8f66\u5e93\u51fa\u5165\u53e3\u8349\u5730\u4e0a\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322756\t31.12730319;1013001263\t121.54271\t31.131196\tB4\u697c\u897f\u5357\u95e8\u8349\u5730\u4e0a\u8fd1\u70b9\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5319279\t31.12725057;1013001188\t121.542539\t31.131084\tB4\u697c\u897f\u5357\u95e8\u8349\u5730\u4e0a\u8fdc\u70b9\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5317556\t31.12714128;1013001180\t121.542319\t31.131022\tB4\u697c\u897f\u5357\u89d2\u7535\u52a8\u8f66\u68da\u8349\u5730\u4e0a\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5315338\t31.12708275;1013001271\t121.542184\t31.131184\tB4\u697c\u897f\u5357\u89d2\u8349\u5730\u4e0a\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5313979\t31.12724681;1013001267\t121.542516\t31.131269\tB4\u697c\u897f\u5357\u89d2\u65b9\u5f62\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5317325\t31.12732657;1013001259\t121.54218\t31.131269\tB4\u697c\u897f\u5357\u89d2\u6d88\u9632\u6813\u65c1\u65b9\u5f62\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5313939\t31.12733185;1013001269\t121.542175\t31.131362\tB4\u697c\u897f\u5357\u89d2\u8349\u5730\u4e0a\u6d88\u9632\u6813\u4ee5\u531720\u7c73\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5313889\t31.12742489;1013001186\t121.542112\t31.131436\tB4\u697c\u897f\u95e8\u5357\u4fa7\u8349\u5730\u4e0a\u8fd1\u70b9\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5313255\t31.12749986;1013001177\t121.542215\t31.131552\tB4\u697c\u897f\u95e8\u5357\u4fa7\u8fdc\u8349\u5730\u4e0a\u70b9\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5314294\t31.1276142;1013001268\t121.542036\t31.131524\tB4\u697c\u4e1c\u5317\u89d2\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.531249\t31.12758902;1013001260\t121.54301\t31.132046\tB4\u697c\u4e1c\u5317\u89d2\u6d88\u9632\u6813\u65c12\u53f7\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322308\t31.12809561;1013001175\t121.543109\t31.132042\tB3\u697c\u4e1c\u5357\u89d2\u4eba\u884c\u9053\u4e0a2\u53f7\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5323306\t31.12809008;1013001184\t121.543069\t31.132274\tB3\u697c\u4e1c\u5357\u89d2\u4eba\u884c\u9053\u4e0a1\u53f7\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322904\t31.12832261;1013001181\t121.543037\t31.132189\tB3\u697c\u4e1c\u95e8\u53e3\u5357\u4fa75\u7c73\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322581\t31.12823814;1013001256\t121.543042\t31.132359\tB3\u697c\u4e1c\u95e8\u53e3\u5317\u4fa7\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5322633\t31.128408;1013001223\t121.546083\t31.131455\tB16b\u697c\u5317\u4fa7\u8349\u5730\u4e0a\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5353263\t31.12745885;1013001232\t121.545103\t31.131177\tB16a\u697c\u5317\u4fa7\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.534339\t31.12719521;1013001203\t121.546568\t31.130999\tB16b\u697c\u4e1c\u4fa7\u8def\u8fb9\u5783\u573e\u6876\u65c1\u4e2d\u56fd\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5358145\t31.12699611;1013001224\t121.546155\t31.13062\tB17b\u697c\u897f\u5317\u4fa7\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5353983\t31.12662312;1013001234\t121.545373\t31.130543\tB16a\u697c\u6b63\u5357\u4fa7\u8def\u8fb9\u6d88\u9632\u6813\u6c34\u8868\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5346105\t31.12655747;1013001235\t121.545103\t31.130273\tB17a\u697c\u897f\u5317\u4fa7\u76d1\u63a7\u6746\u4e0b\u6d88\u9632\u9600\u5c0f\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5343384\t31.12629154;1013001217\t121.545193\t31.129979\tB17a\u697c\u897f\u4fa7\u8def\u8fb9\u6d88\u9632\u6813\u65c1\u6d88\u9632\u9600\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5344289\t31.12599632;1013001206\t121.54602\t31.129848\tB17a\u697c\u4e1c\u5357\u89d2\u9a6c\u8def\u5bf9\u9762\u6d88\u9632\u6813\u65c1\u5927\u6d88\u9632\u9600\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5352618\t31.12585334;1013001236\t121.546487\t31.129886\tB17b\u697c\u897f\u5357\u4fa7\u9a6c\u8def\u5bf9\u9762\u6d88\u9632\u6813\u65c1\u6d88\u9632\u9600\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5357322\t31.12588466;1013001201\t121.546658\t31.133024\tB25\u697c\u897f\u5317\u4fa7\u6d88\u9632\u6813\u65c1\u6d88\u9632\u9600\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5359065\t31.12901914;1013001264\t121.546801\t31.132575\tB25\u697c\u897f\u5357\u89d2\u6d88\u9632\u6813\u65c1\u6c34\u9600\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5360502\t31.12856829;1013001244\t121.546981\t31.132498\tB25\u697c\u897f\u5357\u89d2\u8349\u4e1b\u9600\u95e8\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5362314\t31.1284888;1013001204\t121.547448\t31.132838\tB25\u697c\u4e1c\u4fa7\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5367019\t31.12882224;1013001211\t121.547286\t31.133286\tB25\u697c\u4e1c\u5317\u89d2\u8349\u4e1b\u4e2d\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5365391\t31.12927231;1013001210\t121.546559\t31.133997\tB24b\u697c\u5317\u4fa7\u4e1c\u6d88\u9632\u6813\u65c1\u9600\u95e8\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5358075\t31.12999321;1013001238\t121.545759\t31.133279\tB14b\u697c\u4e1c\u4fa7\u6d88\u9632\u6813\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5350012\t31.12928689;1013001242\t121.545625\t31.133619\tB14b\u697c\u4e1c\u5317\u89d2\u8349\u4e1b\u4e2d\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5348665\t31.12962872;1013001216\t121.544951\t31.133039\tB14\u697cab\u5ea7\u4e2d\u95f4\u8349\u4e1b\u4e2d\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5341871\t31.12905881;1013001218\t121.545912\t31.132869\tB15b\u697c\u4e1c\u5317\u89d2\u8349\u4e1b\u8fb9\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.535155\t31.12887482;1013001249\t121.54522\t31.133572\tB14b\u697c\u5317\u4fa7\u4e0b\u6709\u7535\u7f06\u6807\u67f1\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5344585\t31.12958766;1013001247\t121.544942\t31.134221\tB14b\u697c\u5317\u4fa7\u9a6c\u8def\u5bf9\u9762\u8349\u4e1b\u4e2d\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5341789\t31.13024056;1013001222\t121.544394\t31.134863\tB13b\u697c\u897f\u5317\u4fa7\u9a6c\u8def\u8fb9\u6c34\u8868\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5336273\t31.13089053;1013001243\t121.545732\t31.135411\tB23\u697c\u897f\u5357\u89d2\u6d88\u9632\u6813\u65c1\u6c34\u8868\u7bb1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5349756\t31.13141859;1013001196\t121.545032\t31.132637\tB15a\u697c\u4e1c\u5317\u4fa7\u9a6c\u8def\u8fb9\u7535\u4fe1\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5342684\t31.12865575;1013001266\t121.54452\t31.132514\tB15a\u697c\u5317\u4fa7\u6d88\u9632\u6813\u65c1\u9600\u95e8\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5337525\t31.12854042;1013001230\t121.544331\t31.132344\tB15a\u697c\u897f\u5317\u89d2\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.533562\t31.12837331;1013001221\t121.544412\t31.132197\tB15a\u697c\u897f\u95e8\u524d\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5336435\t31.12822514;1013001233\t121.544529\t31.131841\tB15a\u697c\u897f\u5357\u89d2\u5783\u573e\u6876\u65c1\u96e8\u6c34\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5337611\t31.12786751;1013001273\t121.544097\t31.132993\tB14a\u697c\u897f\u4fa7\u6d88\u9632\u6813\u65c1\u9600\u95e8\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5333267\t31.12902562;1013001251\t121.544169\t31.133256\tB14a\u697c\u5317\u4fa7\u8def\u8fb9\u5783\u573e\u6876\u65c1\u6c34\u8868\u4e95\u76d6\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5333994\t31.12928745;2397\t121.5416621\t31.13243005\tB3\u897f\u4fa7\u7684\u9a6c\u8def\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5308728\t31.12850068;3089\t121.5418726\t31.13194112\tB3\u897f\u4fa7\u7684\u9a6c\u8def\t\u667a\u80fd\u4e95\u76d6\u5f00\u5173\t121.5310846\t31.12800858;1033000007\t121.543037\t31.131486\tB4\u697c\u5730\u4e0b\u8f66\u5e93\u5165\u53e3\u6c34\u4f4d\u68c0\u6d4b\t\u5730\u4e0b\u8f66\u5e93\t121.5322576\t31.12753538;1033000001\t121.542063\t31.132494\tB3\u697c\u5730\u4e0b\u8f66\u5e93\u5165\u53e3\u6c34\u4f4d\u68c0\u6d4b\t\u5730\u4e0b\u8f66\u5e93\t121.5312768\t31.12855826;1033000008\t121.541587\t31.13484\tB1\u697c\u7f51\u7ba1\u4e2d\u5fc3\u5730\u4e0b\u8f66\u5e93\u5165\u53e3\u6c34\u4f4d\u68c0\u6d4b\t\u5730\u4e0b\u8f66\u5e93\t121.5307988\t31.13091102;1063000014\t121.547253\t31.129702\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u7bee\u7403\u573a\u897f\u4fa7\u6cb3\u90532\u8fb9\t\u6cb3\u9053\u6c34\u6d4a\u5ea6\t121.5365036\t31.12569003;1033000003\t121.547253\t31.129702\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u7bee\u7403\u573a\u897f\u4fa7\u6cb3\u90532\u8fb9\t\u6cb3\u9053\u65e0\u7ebf\u6db2\u4f4d\t121.5365036\t31.12569003;1063000015\t121.548996\t31.130112\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u505c\u8f66\u573a\u897f\u4fa7\u6cb3\u90532\u8fb9\t\u6cb3\u9053\u6c34\u6d4a\u5ea6\t121.5382588\t31.12607665;1033000006\t121.548996\t31.130112\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u505c\u8f66\u573a\u897f\u4fa7\u6cb3\u90532\u8fb9\t\u6cb3\u9053\u65e0\u7ebf\u6db2\u4f4d\t121.5382588\t31.12607665;1063000016\t121.547711\t31.133589\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u7bee\u7403\u573a\u4e1c\u6cb3\u90531\u8fb9\t\u6cb3\u9053\u6c34\u6d4a\u5ea6\t121.5369673\t31.1295694;1033000004\t121.547711\t31.133589\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u7bee\u7403\u573a\u4e1c\u6cb3\u90531\u8fb9\t\u6cb3\u9053\u65e0\u7ebf\u6db2\u4f4d\t121.5369673\t31.1295694;1063000013\t121.546499\t31.1327\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u505c\u8f66\u573a\u4e1c\u6cb3\u90531\u8fb9\t\u6cb3\u9053\u6c34\u6d4a\u5ea6\t121.5357461\t31.12869749;1033000002\t121.546499\t31.1327\t\u4e0a\u6d77\u5e02\u7406\u60f3\u56ed\u533a\u505c\u8f66\u573a\u4e1c\u6cb3\u90531\u8fb9\t\u6cb3\u9053\u65e0\u7ebf\u6db2\u4f4d\t121.5357461\t31.12869749;863703038543687\t121.545845\t31.130651\tB16b\u697c\u5168\u5bb6\u8d85\u5e02\u95e8\u53e3\u5783\u573e\u6876\t\u667a\u80fd\u5783\u573e\u6876\t121.5350861\t31.12665856;863703038571613\t121.545845\t31.130651\tB16b\u697c\u5168\u5bb6\u8d85\u5e02\u95e8\u53e3\u5783\u573e\u6876\t\u667a\u80fd\u5783\u573e\u6876\t121.5350861\t31.12665856;863703036965593\t121.543148\t31.131951\tB4\u697c\u4e1c\u5317\u89d2\u5783\u573e\u6876\t\u667a\u80fd\u5783\u573e\u6876\t121.5323698\t31.1279985;863703038552993\t121.543148\t331.131951\tB4\u697c\u4e1c\u5317\u89d2\u5783\u573e\u6876\t\u667a\u80fd\u5783\u573e\u6876\t121.543148\t331.131951;108002033\t121.542483\t31.131704\tB4\u4e09\u697c\u5f3a\u7535\u95f4\t\u7535\u6c14\u706d\u5f27\t121.5316995\t31.12776194;863703032588316\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b1\u697c103\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033931846\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b1\u697c\u6f14\u8bb2\u5927\u5385\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033933859\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b1\u697c120B\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032574555\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b2\u697c212B\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032588381\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b2\u697c201A\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032530201\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b2\u697c\u4e2d\u95f4\u697c\u68af\u53e3\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033935235\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b3\u697c301A\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033932687\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b3\u697c\u5927\u5385\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033693115\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b3\u697c327B\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032628757\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b4\u697c437\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033734547\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b4\u697c\u5927\u5385\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033872974\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680b4\u697c410\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703033932745\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680bB1\u5c42\u9910\u5385\u897f\u4fa7\u95e8\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032540077\t121.5427\t31.131819\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680bB1\u5c42\u9910\u5385\u4e1c\u4fa7\u95e8\u65c1\t\u667a\u80fd\u70df\u611f\t121.5319183\t31.12787351;863703032538600\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680bB1\u5c42\u9910\u5385\u4e1c\u4fa7\u95e8\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033839916\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680bB1\u5c42\u9910\u5385\u897f\u4fa7\u95e8\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033833943\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b1\u697c158\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032585569\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b1\u697c\u5927\u5385\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032627726\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b1\u697c\u897f\u4fa7\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032543766\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b2\u697c208\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033939013\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b2\u697c\u4e2d\u95f4\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032582160\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b2\u697c\u897f\u4fa7\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033873816\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b3\u697c312\u5ba4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033932646\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b3\u697c\u8336\u6c34\u95f4\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032588399\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b3\u697c\u4e1c\u4fa7\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032584075\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b1\u697c\u7535\u68af\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703033837563\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b3\u697c\u7535\u68af\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032582285\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B4\u680bB1\u5c42\u7535\u68af\u5ba4\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032537461\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680bB1\u5c42\u9910\u5385\u4e2d\u95f4\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;863703032650934\t121.542516\t31.132329\t\u4e0a\u6d77\u5e02\u6d66\u4e1c\u533a\u79c0\u6cbf\u897f\u8def189\u53f7B3\u680b2\u697c\u7535\u68af\u65c1\t\u667a\u80fd\u70df\u611f\t121.5317332\t31.1283862;1400000180012762\t121.540288\t31.134604\tB1\u697c\u6570\u636e\u4e2d\u5fc3\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5294894\t31.13069591;1400000180010234\t121.541533\t31.134968\tB1\u697c\u7f51\u7ba1\u4e2d\u5fc3\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5307445\t31.13103984;1400000180013593\t121.540768\t31.133796\tB1\u697c\u4f20\u8f93\u4e2d\u5fc3\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.5299726\t31.12988044;1400000180010173\t121.54191\t31.13431\tB1\u697c\u7f51\u7ba1\u4e2d\u5fc3\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.5311239\t31.13037607;1400000180010236\t121.542219\t31.135121\t\u4fe1\u606f\u5927\u9053\u97602\u53f7\u95e8\u8fdb\u53e3\t\u667a\u80fd\u6d88\u9632\u6813\t121.531436\t31.13118194;1400000180010336\t121.541057\t31.133671\tB2\u6d4b\u8bd5\u4e2d\u5fc3\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5302638\t31.12975085;1400000180010213\t121.541347\t31.134119\tB2\u6d4b\u8bd5\u4e2d\u5fc3\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5305564\t31.13019407;1400000180010017\t121.542212\t31.134279\tB2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5314283\t31.13034032;1400000180013519\t121.542328\t31.134883\t\u4fe1\u606f\u5927\u9053\u9760B2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u4e1c\t\u667a\u80fd\u6d88\u9632\u6813\t121.5315456\t31.1309423;1400000180010290\t121.540857\t31.133616\tB2\u6d4b\u8bd5\u4e2d\u5fc3\u897f\t\u667a\u80fd\u6d88\u9632\u6813\t121.5300622\t31.12969907;1400000180010325\t121.541865\t31.133522\tB2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u897f\t\u667a\u80fd\u6d88\u9632\u6813\t121.531078\t31.12958904;1400000180010129\t121.542757\t31.133331\tB2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u4e1c\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.5319768\t31.1293841;1400000180013522\t121.54258\t31.134145\t\u4fe1\u606f\u5927\u9053\u9760B2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u4e1c\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.531799\t31.13020059;1400000180010141\t121.54269\t31.133328\tB2\u56fd\u5bb6\u5b89\u5168\u5206\u4e2d\u5fc3\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.5319092\t31.12938215;1400000180013523\t121.539665\t31.13362\tB3\u697c\u897f\u5317\u8fdc\u4fa7\t\u667a\u80fd\u6d88\u9632\u6813\t121.5288608\t31.12972232;1400000180010150\t121.541856\t31.132674\tB3\u697c\u897f\u5317\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5310683\t31.12874147;1400000180010232\t121.543771\t31.133363\t\u4e9a\u592a\u5927\u9053\u9760B14a\u697c\u897f\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5329985\t31.12940046;1400000180010027\t121.543557\t31.132792\t\u5171\u6d4e\u8def\u4e2d\u95f4\t\u667a\u80fd\u6d88\u9632\u6813\t121.5327825\t31.12883292;1400000180013520\t121.541665\t31.132264\tB3\u697c\u897f\u4fa7\t\u667a\u80fd\u6d88\u9632\u6813\t121.5308756\t31.12833464;1400000180013508\t121.543099\t31.132219\tB4\u697c\u4e1c\u5317\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5323206\t31.12826717;1400000180013135\t121.543298\t31.132017\t\u4fe1\u606f\u5927\u9053\u9760B4\u697c\u4e1c\t\u667a\u80fd\u6d88\u9632\u6813\t121.532521\t31.12806217;1400000180010006\t121.54415\t31.132365\t\u4e9a\u592a\u5927\u9053\u9760B15a\u697c\u897f\u5317\t\u667a\u80fd\u6d88\u9632\u6813\t121.5333797\t31.12839704;1400000180013521\t121.541846\t31.134124\tB4\u697c\u897f\u5317\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5310593\t31.13019114;1400000180013270\t121.542337\t31.131283\tB1\u697c\u7f51\u7ba1\u4e2d\u5fc3\u5357\t\u667a\u80fd\u6d88\u9632\u6813\t121.5315521\t31.12734337;1400000180010179\t121.54282\t31.131555\tB4\u697c\u4e1c\u5357\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.532039\t31.12760773;1400000180013130\t121.544206\t31.132032\tB15a\u697c\u897f\u5357\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5334359\t31.12806331;1400000180013039\t121.543919\t31.130369\t\u4fe1\u606f\u5927\u9053\u9760B6\u697c\u4e1c\u4fa7\t\u667a\u80fd\u6d88\u9632\u6813\t121.5331456\t31.12640524;1400000180012777\t121.545105\t31.129619\t3\u53f7\u95e8\u51fa\u53e3\u5317\u4fa7\t\u667a\u80fd\u6d88\u9632\u6813\t121.53434\t31.12563775;1400000180010350\t121.543629\t31.13066\tB6\u697c\u4e1c\u5317\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5328536\t31.12670056;1400000180010190\t121.542828\t31.132966\tB3\u697c\u4e1c\u5317\u89d2\t\u667a\u80fd\u6d88\u9632\u6813\t121.5320481\t31.12901812;MX348\t121.536276\t31.126277\t\u79c0\u6cbf\u897f\u8def189\u53f7B3\u697c1\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.531749\t31.12850104;MX352\t121.536606\t31.125588\t\u79c0\u6cbf\u897f\u8def189\u53f7B4\u697c1\u53f7\u89c2\u5149\u68af\t\u667a\u80fd\u7535\u68af\t121.5322347\t31.12772015;MX345\t121.536606\t31.125514\t\u79c0\u6cbf\u897f\u8def189\u53f7B4\u697c3\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.5322504\t31.12769276;MX350\t121.535707\t31.126488\t\u79c0\u6cbf\u897f\u8def189\u53f7B3\u697c4\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.5312977\t31.12871803;MX347\t121.536249\t31.126314\t\u79c0\u6cbf\u897f\u8def189\u53f7B3\u697c2\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.5318119\t31.12852231;MX344\t121.536641\t31.125459\t\u79c0\u6cbf\u897f\u8def189\u53f7B4\u697c4\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.5322868\t31.12760499;MX349\t121.535686\t31.126539\t\u79c0\u6cbf\u897f\u8def189\u53f7B3\u697c5\u53f7\u68af\t\u667a\u80fd\u7535\u68af\t121.53137\t31.1287143;MX351\t121.536147\t31.125625\t\u79c0\u6cbf\u897f\u8def189\u53f7B4\u697c2\u53f7\u89c2\u5149\u68af\t\u667a\u80fd\u7535\u68af\t121.5317717\t31.12774277;5ac1fe3d1d41ec2409b6f655\t121.542627\t31.131541\t\u7406\u60f3\u96c6\u56e2B4\u697c\u9876\t\u73af\u5883\u76d1\u6d4b\t121.5318445\t31.12759674;ercigongshui\t121.543248\t31.130172\tB6\u6c34\u7bb1\u623f\t\u4e8c\u6b21\u4f9b\u6c34\t121.5324694\t31.12621859;05713171a1ea42e79ed361144c1a72c8\t121.545807\t31.131557\tB16a\u697c\u4e2d\u56fd\u7535\u4fe1\u57f9\u8bad\u5b66\u5458\u4e1c\u5317\u4fa7\u7f57\u6c49\u677e\t\u53e4\u6811\u540d\u6728\t121.5350484\t31.12756479;",dealedAllIconData={},dealedOtherIconData={"\u8f66\u724c\u8bc6\u522b":[{id:1,name:"\u56ed\u533aB1\u505c\u8f66\u573a\u4e1c",location:[121.5305802,31.131151]},{id:2,name:"\u56ed\u533aB1\u505c\u8f66\u573a\u897f",location:[121.534974,31.128694]},{id:3,name:"\u56ed\u533aB3\u505c\u8f66\u573a",location:[121.5308563,31.1285172]},{id:4,name:"\u56ed\u533aB3\u5730\u4e0b\u8f66\u5e93",location:[121.5315323,31.1287847]},{id:5,name:"\u56ed\u533aB3\u6d88\u9632\u901a\u9053",location:[121.5313087,31.1282994]},{id:6,name:"\u56ed\u533aB4\u505c\u8f66\u573a",location:[121.531374,31.1277189]},{id:7,name:"\u56ed\u533aB4\u5730\u4e0b\u8f66\u5e93",location:[121.5320119,31.1273497]},{id:8,name:"\u56ed\u533aB4\u6d88\u9632\u901a\u9053",location:[121.5314452,31.1274762]},{id:9,name:"\u56ed\u533aB6\u505c\u8f66\u573a",location:[121.532662,31.125934]},{id:10,name:"\u56ed\u533aB6\u5730\u4e0b\u8f66\u5e93",location:[121.5321915,31.1266385]},{id:11,name:"\u56ed\u533aB6\u95e8\u524d\u5361\u53e3",location:[121.5330963,31.1262259]},{id:12,name:"\u56ed\u533aB16\u95e8\u524d\u5361\u53e3",location:[121.5341293,31.1269321]},{id:13,name:"\u4e0a\u5357\u8def\u5165\u53e3",location:[121.5344704,31.1253607]},{id:14,name:"\u4e0a\u5357\u8def\u51fa\u53e3",location:[121.5335367,31.1250896]},{id:15,name:"\u79c0\u6cbf\u897f\u8def\u5165\u53e3",location:[121.5313606,31.1312569]},{id:16,name:"\u79c0\u6cbf\u897f\u8def\u51fa\u53e3",location:[121.5323707,31.1315513]}],"\u89c6\u9891\u6d41":[{id:1,location:[121.53045157002151,31.129628255819142]},{id:2,location:[121.53160979472995,31.128400406765138]},{id:3,location:[121.53184617889343,31.12783853969188]},{id:4,location:[121.53283736758459,31.12559354944227]},{id:5,location:[121.53399304232113,31.128239736738323]},{id:6,location:[121.53484352494661,31.128420818478176]},{id:7,location:[121.53598261877505,31.1296855928357]},{id:8,location:[121.53274088057015,31.126393745582106]},{id:9,location:[121.53141996556963,31.131416332341786]},{id:10,location:[121.5321583563977,31.131578628238586]},{id:11,location:[121.53356876866542,31.12484574802778]},{id:12,location:[121.53467870601588,31.124777025591314]},{id:13,location:[121.53106829418942,31.130898929695107]}],"\u697c\u5c42\u89c6\u9891\u6d41":[{id:1,location:[121.53092473851302,31.12982999218275]},{id:2,location:[121.53201082192322,31.128359033455155]},{id:3,location:[121.53214118904805,31.12804773197992]},{id:4,location:[121.53284377177795,31.126421584369055]}],"\u8fdd\u505c":[{id:1,location:[121.53107986333157,31.12870665338417]},{id:2,location:[121.53109225872561,31.128485854322577]},{id:3,location:[121.53112503190602,31.128389637906608]},{id:4,location:[121.53146636230127,31.12757438388867]}]},bigParkColor={1:{region:"#AAAAAA",a:.2,line:"#AAAAAA"},2:{region:"#FFE570",a:.2,line:"#FFE570"},3:{region:"#FF878B",a:.2,line:"#FF4A5F"},4:{region:"#5DFF8F",a:.2,line:"#5DDA3F"}};$(function(){window.onmessage=function(a){console.info(a.data);a.data.showIcon&&(showIcon=a.data.showIcon,"string"==typeof showIcon&&(showIcon=decodeURIComponent(showIcon)),showIcon=","+showIcon+",",reloadIcon());a.data.iconData&&(iconData=a.data.iconData,"string"==typeof iconData&&(iconData=decodeURIComponent(iconData),iconData=eval("("+iconData+")")),reloadIcon());a.data.data&&(paramData=a.data.data,loadMovingLine());console.info(showIcon,iconData)};allIconData=allIconData.split(";");for(var a=0;a<allIconData.length;a++){var b=allIconData[a].split("\t"),d={};d.id=b[0];d.address=b[3];d.typeName=b[4];d.lng=b[5];d.lat=b[6];d.size=1;dealedAllIconData[d.typeName]?dealedAllIconData[d.typeName].push(d):dealedAllIconData[d.typeName]=[d]}console.log(dealedAllIconData);showProgress();var c=new $.Deferred;readFile("data/building.MID",function(a){loadRegionMID(1,a);readFile("data/building.mif",function(a){loadRegionMIF(1,a);readFile("data/other.MID",function(a){loadRegionMID(2,a);readFile("data/other.mif",function(a){loadRegionMIF(2,a);readFile("data/road.MID",function(a){loadRegionMID(3,a);readFile("data/road.mif",function(a){loadRegionMIF(3,a);readFile("data/water.MID",function(a){loadRegionMID(4,a);readFile("data/water.mif",function(a){loadRegionMIF(4,a);readFile("data/sea.MID",function(a){loadRegionMID(6,a,1);readFile("data/sea.MIF",function(a){loadRegionMIF(6,a);readFile("data/sh.MID",function(a){loadRegionMID(7,a,1);readFile("data/sh.MIF",function(a){loadRegionMIF(7,a);readFile("data/stop1.MID",function(a){loadRegionMID(8,a,1);readFile("data/stop1.MIF",function(a){loadRegionMIF(8,a);c.resolve()})})})})})})})})})})})})})});$.when(c).done(function(){for(var a=0;a<regions.length;a++){for(var b=[],d=[],c=regions[a].area,g=0;g<c.length;g++){b.push(c[g].points);for(var l=0;l<c[g].points.length;l++)d.push(c[g].points[l])}b={geometry:{coordinates:b,type:"Polygon"},type:"Feature",properties:regions[a].property};b.properties.base_height=0;b.properties.color="#69c8ec";b.properties.i=a;1==b.properties.level?(clickedBuilding&&b.properties.name==clickedBuilding&&(b.properties.color="#FFD723",lastClickI=b.properties.i),building.features.push(b)):2==b.properties.level?other.features.push(b):3==b.properties.level?road.features.push(b):4==b.properties.level?water.features.push(b):5!=b.properties.level&&(6==b.properties.level?sea.features.push(b):7==b.properties.level&&(b.properties.color="#213766",areas.features.push(b),b=Object.create(b),b.geometry={coordinates:d},b.geometry.type="LineString",areasLine.features.push(b)))}a=[121.532967,31.128546];d=8;c=b=0;1==direct&&(a=mapCenter||[121.53344638847352,31.128178869049435],d=mapZoom||16.5,b=mapPitch||60,c=mapBearing||165);loadMapBox({container:"map",center:a,zoom:d,pitch:b,bearing:c,maxZoom:20,minZoom:0,style:"mapbox://styles/mapbox/light-v9-modify.json",navigationControl:"top-right",fullscreenControl:"bottom-right"});loadMapDone.done(function(){debug&&(map.on("click",function(a){a=map.queryRenderedFeatures(a.point);document.getElementById("features").innerHTML=JSON.stringify(a,null,2)}),$("body").on("click","#parks",function(){if($(this).attr("on")){for(var a=0;a<stop.features.length;a++)map.setPaintProperty("raster"+a,"raster-opacity",1);$(this).removeAttr("on")}else{for(a=0;a<stop.features.length;a++)map.setPaintProperty("raster"+a,"raster-opacity",0);$(this).attr("on","on")}}));loadMapImages();loadPolygon(areas,"",1,"areas",!1,"",opacityZoom);loadLines(areasLine,2,"white","areasLine","",opacityZoom);loadPolygon(sea,"#3f9cf9",1,"sea");loadPolygon(other,"#29527f",1,"other",opacityZoom);loadPolygon(water,"#76bbb8",1,"water",opacityZoom);loadPolygon(road,"#7389b1",1,"road",opacityZoom);if(0==type||3==type||4==type){for(var a=0;a<stop.features.length;a++){var b=stop.features[a].geometry.coordinates[0];b.splice(4,1);stop.features[a].properties.text=stop.features[a].properties.id;-1<parks.indexOf(stop.features[a].properties.id+"")?addFront("images/64jh_05.png",b,a):addFront("images/64jh_03.png",b,a)}var a={type:"FeatureCollection",features:[]},d={type:"FeatureCollection",features:[]},c;for(c in bigStop)b=bigStop[c],bigParkData[c]?(b.properties.color=bigParkColor[bigParkData[c]].region,b.properties.linecolor=bigParkColor[bigParkData[c]].line):(b.properties.color=bigParkColor[1].region,b.properties.linecolor=bigParkColor[1].line),a.features.push(b),-1==hideParkOutLineId.indexOf(c)&&d.features.push(turf.polygonToLine(b));loadPolygon(a,"",.2,"park",opacityZoom,!1,19);loadLines(d,4,"","parkLine",opacityZoom)}1==debug&&addFrontLabel(stop,"stopFront","point");loadBuildings(building,"","building");addFrontLabel(frontsLine,"frontsLine","line");b={type:"FeatureCollection",features:[]};for(a=0;a<building.features.length;a++){var d=building.features[a].properties.center,e=building.features[a].properties.name;e&&b.features.push({properties:{placement:"point",text:e,size:18,spacing:0},geometry:{coordinates:[d.x,d.y],type:"Point"},type:"Feature"})}addFrontLabel(b,"frontsPoint","point");var f=document.getElementById("layer");$("#cp5b").colorpicker({format:"rgba"}).on("colorpickerChange colorpickerCreate",function(a){colorData[f.value]={};if("areasLine"==f.value)map.setPaintProperty(f.value,"line-color",a.color.toRgbString());else if("frontsLine"==f.value)map.setPaintProperty(f.value,"text-color",a.color.toRgbString());else if("frontsPoint"==f.value)map.setPaintProperty(f.value,"text-color",a.color.toRgbString());else if("building"==f.value){for(var b=0;b<building.features.length;b++)building.features[b].properties.color=a.color.toRgbString();map.getSource("building").setData(building);map.setPaintProperty(f.value,"fill-extrusion-opacity",["interpolate",["linear"],["zoom"],opacityZoom,0,opacityZoom+2,+a.color._a]);colorData[f.value].a=a.color._a}else map.setPaintProperty(f.value,"fill-color",a.color.toRgbString());colorData[f.value].color=a.color.toRgbString()});colorData={areas:{a:"",color:"rgb(18, 19, 50)"},areasLine:{a:"",color:"rgb(158, 158, 158)"},building:{a:"1",color:"rgb(126, 217, 255)"},frontsLine:{a:"",color:"rgb(123, 123, 145)"},frontsPoint:{a:"",color:"rgb(55, 55, 91)"},other:{a:"",color:"rgb(42, 77, 127)"},park:{a:"",color:"rgb(255, 0, 31)"},road:{a:"",color:"rgb(36, 48, 99)"},sea:{a:"",color:"rgb(77, 122, 122)"},water:{a:"",color:"rgb(8, 135, 135)"}};$("#cp5b").colorpicker("setValue",colorData[$("#layer").val()].color);for(c in colorData)if("areasLine"==c)map.setPaintProperty(c,"line-color",colorData[c].color);else if("frontsLine"==c)map.setPaintProperty(c,"text-color",colorData[c].color);else if("frontsPoint"==c)map.setPaintProperty(c,"text-color",colorData[c].color);else if("building"==c){for(a=0;a<building.features.length;a++)building.features[a].properties.color=colorData[c].color,clickedBuilding&&building.features[a].properties.name==clickedBuilding&&(building.features[a].properties.color="#FFD723",lastClickI=building.features[a].properties.i);map.getSource("building").setData(building);map.setPaintProperty(c,"fill-extrusion-opacity",["interpolate",["linear"],["zoom"],opacityZoom,0,opacityZoom+2,+colorData[c].a])}else"park"==c?0!=type&&3!=type&&4!=type||map.setPaintProperty(c,"fill-color",colorData[c].color):map.setPaintProperty(c,"fill-color",colorData[c].color);$("body").on("click","#save",function(){$.post("DbAction_save.do",{data:JSON.stringify(colorData)},function(a){alert("\u6210\u529f\uff01")})});$("body").on("change","#layer",function(){$("#cp5b").colorpicker("setValue",colorData[$("#layer").val()].color)});loadIcons({type:"FeatureCollection",features:[{geometry:{coordinates:[121.18984578143761,31.171408940788908],type:"Point"},type:"Feature"},{geometry:{coordinates:[121.53344638847352,31.128178869049435],type:"Point"},type:"Feature"}]},1,"location","locationPoint");d={type:"FeatureCollection",features:[]};for(c in dealedOtherIconData)if(""==showIcon||-1!=showIcon.indexOf(","+c+",")){for(var g in iconData)if(g==c)for(a=0;a<iconData[c].length;a++){b=!1;for(e=0;e<dealedOtherIconData[c].length;e++)dealedOtherIconData[c][e].size=1,dealedOtherIconData[c][e].id==iconData[c][a].id&&(b=!0,dealedOtherIconData[c][e]=$.extend(dealedOtherIconData[c][e],iconData[c][a]));b||dealedOtherIconData[c].push(iconData[c][a])}for(a=0;a<dealedOtherIconData[c].length;a++)b=dealedOtherIconData[c][a],b.key=c,b.image=c,b={geometry:{coordinates:dealedOtherIconData[c][a].location,type:"Point"},properties:b,type:"Feature"},d.features.push(b)}loadIconsShow(d,1,"","otherIcons");console.log(dealedAllIconData);if(2==type||0==type){d={type:"FeatureCollection",features:[]};for(c in dealedAllIconData)if(""==showIcon||-1!=showIcon.indexOf(","+c+",")){for(g in iconData)if(g==c)for(a=0;a<iconData[c].length;a++){b=!1;for(e=0;e<dealedAllIconData[c].length;e++)dealedAllIconData[c][e].size=1,dealedAllIconData[c][e].id==iconData[c][a].id&&(b=!0,dealedAllIconData[c][e]=$.extend(dealedAllIconData[c][e],iconData[c][a]));b||dealedAllIconData[c].push(iconData[c][a])}for(a=0;a<dealedAllIconData[c].length;a++)dealedAllIconData[c][a].lng&&(b=dealedAllIconData[c][a],b.key=c,b.image=c+"_"+(b.status||1),b={geometry:{coordinates:[+dealedAllIconData[c][a].lng,+dealedAllIconData[c][a].lat],type:"Point"},properties:b,type:"Feature"},d.features.push(b))}loadIconsShow(d,1,"","deviceIcon")}1==direct&&(1!=bearing&&startBearing(1E4),0!=type&&1!=type&&3!=type||loadMovingLine());1!=direct&&map.flyTo({center:mapCenter||[121.53344638847352,31.128178869049435],zoom:mapZoom||16.5,speed:mapSpeed||.5,pitch:mapPitch||60,bearing:mapBearing||165,curve:1,easing:function(a){1==a&&(1==bearing||bearingInterval||startBearing(1E4),0!=type&&1!=type&&3!=type||loadMovingLine());return a}});closeProgress()})})});function reloadIcon(){var a={type:"FeatureCollection",features:[]},b;for(b in dealedOtherIconData)if(""==showIcon||-1!=showIcon.indexOf(","+b+",")){for(var d in iconData)if(d==b)for(var c=0;c<iconData[b].length;c++){for(var e=!1,f=0;f<dealedOtherIconData[b].length;f++)dealedOtherIconData[b][f].size=1,dealedOtherIconData[b][f].id==iconData[b][c].id&&(e=!0,dealedOtherIconData[b][f]=$.extend(dealedOtherIconData[b][f],iconData[b][c]));e||dealedOtherIconData[b].push(iconData[b][c])}for(c=0;c<dealedOtherIconData[b].length;c++)e=dealedOtherIconData[b][c],e.key=b,e.image=b,e={geometry:{coordinates:dealedOtherIconData[b][c].location,type:"Point"},properties:e,type:"Feature"},a.features.push(e)}try{loadIconsShow(a,1,"","otherIcons")}catch(m){map.getSource("otherIcons").setData(a)}a={type:"FeatureCollection",features:[]};for(b in dealedAllIconData)if(""==showIcon||-1!=showIcon.indexOf(","+b+",")){for(d in iconData)if(d==b)for(c=0;c<iconData[b].length;c++){e=!1;for(f=0;f<dealedAllIconData[b].length;f++)dealedAllIconData[b][f].size=1,dealedAllIconData[b][f].id==iconData[b][c].id&&(e=!0,dealedAllIconData[b][f]=$.extend(dealedAllIconData[b][f],iconData[b][c]));e||dealedAllIconData[b].push(iconData[b][c])}for(c=0;c<dealedAllIconData[b].length;c++)dealedAllIconData[b][c].lng&&(e=dealedAllIconData[b][c],e.key=b,e.image=b+"_"+(e.status||1),e={geometry:{coordinates:[+dealedAllIconData[b][c].lng,+dealedAllIconData[b][c].lat],type:"Point"},properties:e,type:"Feature"},a.features.push(e))}try{loadIconsShow(a,1,"","deviceIcon")}catch(m){map.getSource("deviceIcon").setData(a)}}var curves=[],pointsCounts=[],starts=[],testLine=[];function loadMovingLine(){if(""!=paramData){testLine=[[]];paramData=paramData.split(";");for(var a=0;a<paramData.length;a++)testLine[0].push([+paramData[a].split(",")[0],+paramData[a].split(",")[1]])}for(var a={type:"FeatureCollection",features:[]},b={type:"FeatureCollection",features:[]},d=0;d<testLine.length;d++){b.features.push({geometry:{coordinates:testLine[d],type:"LineString"},type:"Feature"});for(var c=0;c<testLine[d].length;c++)a.features.push({type:"Feature",properties:{index:c+1+""},geometry:{type:"Point",coordinates:testLine[d][c]}})}try{loadLines(b,4,"#A0A400","movingLine",opacityZoom),map.addLayer({id:"movingLinePoint",source:{type:"geojson",data:a},type:"symbol",layout:{"icon-image":"movingLinePoint","icon-size":1.2,"icon-allow-overlap":!0,"icon-anchor":"bottom","text-field":["get","index"],"text-pitch-alignment":"viewport","text-size":12,"text-offset":[0,-1.1],"text-allow-overlap":!0},paint:{"text-color":"white","icon-opacity":["interpolate",["linear"],["zoom"],opacityZoom,0,opacityZoom+2,1]}})}catch(e){map.getSource("movingLine").setData(b),map.getSource("movingLinePoint").setData(a)}}function drawLine(a){var b=curves[a],d=pointsCounts[a],c=starts[a],e=[];d==b.length?c++:(c=0<d-30?d-30:0,d++);for(var f=c;f<d;f++)e.push(b[f]);d==b.length&&c==b.length-1&&(c=0,d=1);b={type:"FeatureCollection",features:[{geometry:{coordinates:e,type:"LineString"},type:"Feature"}]};2<=e.length&&(e={type:"FeatureCollection",features:[{type:"Feature",properties:{bearing:turf.bearing(turf.point(e[e.length-2]),turf.point(e[e.length-1]))},geometry:{type:"Point",coordinates:e[e.length-1]}}]},map.getSource("movingCar"+a).setData(e));map.getSource("movingLine"+a).setData(b);pointsCounts[a]=d;starts[a]=c;requestAnimationFrame(function(){drawLine(a)})}function loadMapImages(){map.loadImage("images/track.png",function(a,d){if(a)throw a;map.addImage("movingLinePoint",d)});map.loadImage("images/chepaishibie.png",function(a,d){if(a)throw a;map.addImage("\u8f66\u724c\u8bc6\u522b",d)});map.loadImage("images/loucengshipingliu.png",function(a,d){if(a)throw a;map.addImage("\u697c\u5c42\u89c6\u9891\u6d41",d)});map.loadImage("images/shipingliu.png",function(a,d){if(a)throw a;map.addImage("\u89c6\u9891\u6d41",d)});map.loadImage("images/weiting.png",function(a,d){if(a)throw a;map.addImage("\u8fdd\u505c",d)});map.loadImage("images/jth_37.png",function(a,d){if(a)throw a;map.addImage("car",d)});map.loadImage("images/dagl_43.png",function(a,d){if(a)throw a;map.addImage("location",d)});for(var a={i:1};8>a.i;a={i:a.i},a.i++)map.loadImage("images/tbk/1 ("+a.i+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u667a\u80fd\u7535\u68af_"+a.i,c)}}(a));for(a={i$2:1};8>a.i$2;a={i$2:a.i$2},a.i$2++)map.loadImage("images/tbk/2 ("+a.i$2+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u667a\u80fd\u70df\u611f_"+a.i$2,c)}}(a));for(a={i$3:1};8>a.i$3;a={i$3:a.i$3},a.i$3++)map.loadImage("images/tbk/3 ("+a.i$3+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u667a\u80fd\u6d88\u9632\u6813_"+a.i$3,c)}}(a));for(a={i$4:1};8>a.i$4;a={i$4:a.i$4},a.i$4++)map.loadImage("images/tbk/4 ("+a.i$4+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u7535\u6c14\u706d\u5f27_"+a.i$4,c)}}(a));for(a={i$5:1};8>a.i$5;a={i$5:a.i$5},a.i$5++)map.loadImage("images/tbk/5 ("+a.i$5+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u65e0\u4eba\u503c\u5b88_"+a.i$5,c)}}(a));for(a={i$6:1};8>a.i$6;a={i$6:a.i$6},a.i$6++)map.loadImage("images/tbk/6 ("+a.i$6+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u5730\u4e0b\u8f66\u5e93_"+a.i$6,c)}}(a));for(a={i$7:1};8>a.i$7;a={i$7:a.i$7},a.i$7++)map.loadImage("images/tbk/7 ("+a.i$7+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u667a\u80fd\u4e95\u76d6\u5f00\u5173_"+a.i$7,c)}}(a));for(a={i$8:1};8>a.i$8;a={i$8:a.i$8},a.i$8++)map.loadImage("images/tbk/8 ("+a.i$8+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u6c61\u6c34\u623f_"+a.i$8,c)}}(a));for(a={i$9:1};8>a.i$9;a={i$9:a.i$9},a.i$9++)map.loadImage("images/tbk/9 ("+a.i$9+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u6cb3\u9053\u6c34\u6d4a\u5ea6_"+a.i$9,c)}}(a));for(a={i$10:1};8>a.i$10;a={i$10:a.i$10},a.i$10++)map.loadImage("images/tbk/9 ("+a.i$10+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u6cb3\u9053\u65e0\u7ebf\u6db2\u4f4d_"+a.i$10,c)}}(a));for(a={i$11:1};8>a.i$11;a={i$11:a.i$11},a.i$11++)map.loadImage("images/tbk/10 ("+a.i$11+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u4e8c\u6b21\u4f9b\u6c34_"+a.i$11,c)}}(a));for(a={i$12:1};8>a.i$12;a={i$12:a.i$12},a.i$12++)map.loadImage("images/tbk/11 ("+a.i$12+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u73af\u5883\u76d1\u6d4b_"+a.i$12,c)}}(a));for(a={i$13:1};8>a.i$13;a={i$13:a.i$13},a.i$13++)map.loadImage("images/tbk/12 ("+a.i$13+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u667a\u80fd\u5783\u573e\u6876_"+a.i$13,c)}}(a));for(a={i$14:1};8>a.i$14;a={i$14:a.i$14},a.i$14++)map.loadImage("images/tbk/13 ("+a.i$14+").png",function(a){return function(b,c){if(b)throw b;map.addImage("\u53e4\u6811\u540d\u6728_"+a.i$14,c)}}(a))}function startBearing(a){isBearing=!0;bearing=map.getBearing();bearingInterval=requestAnimationFrame(function d(){bearing+=.2;map.setBearing(bearing);bearingInterval=requestAnimationFrame(d)});a&&(map.on("mousedown",function(){window.cancelAnimationFrame(bearingInterval);window.clearTimeout(bearingTimer);isBearing=!1}),map.on("zoomstart",function(){window.cancelAnimationFrame(bearingInterval);window.clearTimeout(bearingTimer);isBearing=!1}),map.on("mouseup",function(){bearingTimer=window.setTimeout(function(){isBearing||startBearing()},a)}),map.on("zoomend",function(){bearingTimer=window.setTimeout(function(){isBearing||startBearing()},a)}))}function getPointInLine(a,b){if(null==b||null==b.step&&null==b.distance)return a;null==b.keyPoint&&(b.keyPoint=!1);null==b.stopStep&&(b.stopStep=b.step);for(var d=[],c=0,e=getAllLen(a),f=0,m=!0,h=0;h<a.length;h++){var g=getPoint(a[h]);if(0==h)c=0,d.push(toPoint(g)),f++;else if(1<=h){var l=getPoint(a[h-1]),n=getLen(a[h],a[h-1]),k;k=b.step?e*f/b.step:b.distance*f;k>e&&(k=e);c+n<=k?(c+n==k?(d.push(toPoint(g)),f++):b.keyPoint&&d.push(toPoint(g)),c+=n):(g=getStepPoint(l,g,k-c,n),d.push(toPoint(g)),h--,f++)}if(b.step!=b.stopStep&&f-1==b.stopStep){m=!1;break}}return{points:d,allLen:e,len:c,end:m}}function getAllLen(a){for(var b=0,d=0;d<a.length-1;d++)b+=getLen(a[d],a[d+1]);return b}function getStepPoint(a,b,d,c){return{x:a.x+(b.x-a.x)*d/c,y:a.y+(b.y-a.y)*d/c}}function getLen(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function getPoint(a){return{x:a[0],y:a[1]}}function toPoint(a){return[a.x,a.y]}function randomInt(a,b){return Math.floor(randomFloat(a,b+1))}function randomFloat(a,b){a=a||0;return a+Math.random()*((b||1)-a)};